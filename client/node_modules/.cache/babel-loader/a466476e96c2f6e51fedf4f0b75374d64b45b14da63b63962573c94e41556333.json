{"ast":null,"code":"import _slicedToArray from\"C:/Users/Nicolas/OneDrive/Escritorio/Mern-Context/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:/Users/Nicolas/OneDrive/Escritorio/Mern-Context/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Nicolas/OneDrive/Escritorio/Mern-Context/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{Formik,Form,Field,ErrorMessage}from\"formik\";import*as Yup from\"yup\";import{usePost}from\"../context/postContext\";import{Link,useNavigate,useParams}from\"react-router-dom\";import{useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var PostForm=function PostForm(){var _usePost=usePost(),createPost=_usePost.createPost,getPost=_usePost.getPost,updatePost=_usePost.updatePost;var navigate=useNavigate();var params=useParams();useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!params.id){_context.next=5;break;}_context.next=3;return getPost(params.id);case 3:res=_context.sent;setPost(res.data);case 5:case\"end\":return _context.stop();}}},_callee);}))();},[params.id]);var _useState=useState({title:\"\",description:\"\",image:null}),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-zinc-800 shadow-md shadow-black p-10\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"flex justify-between items-center py-4 text-white\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl flex\",children:\"New Post\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"text-gray-400 text-sm hover:text-gray-300 \",children:\"Go Back\"})]}),/*#__PURE__*/_jsx(Formik,{initialValues:post,validationSchema:Yup.object({title:Yup.string().required(\"El titulo es necesario\"),description:Yup.string().required(\"La descripcion es necesario\")}),onSubmit:/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(values,actions){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!params.id){_context2.next=5;break;}_context2.next=3;return updatePost(params.id,values);case 3:_context2.next=7;break;case 5:_context2.next=7;return createPost(values);case 7:navigate(\"/\");case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x,_x2){return _ref2.apply(this,arguments);};}(),enableReinitialize:true,children:function children(_ref3){var handleSubmit=_ref3.handleSubmit,setFieldValue=_ref3.setFieldValue;return/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm block font-bold text-gray-400\",htmlFor:\"tile\",children:\"Title\"}),/*#__PURE__*/_jsx(Field,{name:\"title\",placeholder:\"title\",className:\"px-3 py-2 focus:outline-none rounded bg-gray-400 text-white w-full\"}),/*#__PURE__*/_jsx(ErrorMessage,{component:\"p\",name:\"title\",className:\"bg-red-600 text-white\"}),/*#__PURE__*/_jsx(\"label\",{className:\"text-sm block font-bold text-gray-400\",htmlFor:\"description\",children:\"Description\"}),/*#__PURE__*/_jsx(Field,{component:\"textarea\",rows:3,name:\"description\",placeholder:\"description\",className:\"px-3 py-2 focus:outline-none rounded bg-gray-400 text-white w-full\"}),/*#__PURE__*/_jsx(ErrorMessage,{component:\"p\",name:\"description\",className:\"bg-red-600 text-white\"}),/*#__PURE__*/_jsx(\"label\",{className:\"text-sm block font-bold text-gray-400\",htmlFor:\"description\",children:\"Description\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"image\",className:\"px-3 py-2 focus:outline-none rounded bg-gray-600 text-white w-full\",onChange:function onChange(e){return setFieldValue(\"image\",e.target.files[0]);}}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-gray-300 hover:bg-gray-500 hover:animate-pulse font-bold text-black hover:text-white text-xl rounded-xl px-3 py-3 block w-full mb-3\",type:\"submit\",children:\"Save\"})]});}})]})});};","map":{"version":3,"names":["Formik","Form","Field","ErrorMessage","Yup","usePost","Link","useNavigate","useParams","useEffect","useState","PostForm","createPost","getPost","updatePost","navigate","params","id","res","setPost","data","title","description","image","post","object","string","required","values","actions","handleSubmit","setFieldValue","e","target","files"],"sources":["C:/Users/Nicolas/OneDrive/Escritorio/Mern-Context/client/src/pages/PostForm.js"],"sourcesContent":["import {Formik, Form, Field, ErrorMessage,} from \"formik\"\r\nimport * as Yup from \"yup\"\r\nimport { usePost } from \"../context/postContext\"\r\nimport { Link, useNavigate, useParams } from \"react-router-dom\"\r\nimport { useEffect, useState } from \"react\"\r\n\r\n\r\n\r\nexport const PostForm = () => {\r\n\r\n  const {createPost, getPost, updatePost} = usePost()\r\n  const navigate = useNavigate()\r\n  const params = useParams()\r\n  useEffect(() => {\r\n   (async ()=>{ if(params.id){\r\n    const res = await getPost(params.id)\r\n    setPost(res.data)\r\n   }})()\r\n  }, [params.id])\r\n  const [post, setPost] = useState({\r\n    title:\"\",\r\n    description:\"\",\r\n    image: null\r\n  })\r\n  \r\n \r\n \r\n \r\n  return (\r\n    <div className=\"flex items-center justify-center\">\r\n      <div className=\"bg-zinc-800 shadow-md shadow-black p-10\">\r\n\r\n      <header className=\"flex justify-between items-center py-4 text-white\">\r\n        <h3 className=\"text-xl flex\">New Post</h3>\r\n        <Link to=\"/\" className=\"text-gray-400 text-sm hover:text-gray-300 \">Go Back</Link>\r\n      </header>\r\n\r\n\r\n      <Formik initialValues={post}\r\n      validationSchema={Yup.object({\r\n        title:Yup.string().required(\"El titulo es necesario\"),\r\n        description:Yup.string().required(\"La descripcion es necesario\")\r\n        \r\n      })}\r\n      onSubmit={async (values, actions) => {\r\n     if(params.id){\r\n          await updatePost(params.id, values)\r\n      }else{await createPost(values)}\r\n      navigate(\"/\")\r\n     }}\r\n     enableReinitialize\r\n    >\r\n      {({handleSubmit, setFieldValue}) =>(\r\n        <Form onSubmit={handleSubmit}>\r\n        <label className=\"text-sm block font-bold text-gray-400\" htmlFor=\"tile\">Title</label>\r\n        <Field name=\"title\" placeholder=\"title\" className=\"px-3 py-2 focus:outline-none rounded bg-gray-400 text-white w-full\"/>\r\n        <ErrorMessage component=\"p\" name=\"title\"  className=\"bg-red-600 text-white\"/>\r\n        <label className=\"text-sm block font-bold text-gray-400\" htmlFor=\"description\">Description</label>\r\n        <Field  component=\"textarea\" rows={3} name=\"description\" placeholder=\"description\" className=\"px-3 py-2 focus:outline-none rounded bg-gray-400 text-white w-full\"/>\r\n        <ErrorMessage component=\"p\" name=\"description\" className=\"bg-red-600 text-white\"/>\r\n        <label className=\"text-sm block font-bold text-gray-400\" htmlFor=\"description\">Description</label>\r\n        <input type=\"file\" name=\"image\" className=\"px-3 py-2 focus:outline-none rounded bg-gray-600 text-white w-full\" onChange={(e) => setFieldValue(\"image\", e.target.files[0])}/>\r\n        <button className=\"bg-gray-300 hover:bg-gray-500 hover:animate-pulse font-bold text-black hover:text-white text-xl rounded-xl px-3 py-3 block w-full mb-3\" type=\"submit\">Save</button>\r\n      </Form>\r\n      )}\r\n    </Formik>\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}